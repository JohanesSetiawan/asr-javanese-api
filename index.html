<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Speech Recognition</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  </head>

  <body class="container mt-5">
    <h1 class="mb-4">Automatic Speech Recognition | Javanese Language</h1>
    <p>
      This model finetuned from facebook/wav2vec2-large-xlsr-53, with value WER is 17.61%. You can read more about the model in
      <a href="https://huggingface.co/cahya/wav2vec2-large-xlsr-javanese">here</a>.
    </p>
    <div class="mb-3">
      <label for="audioInput" class="form-label">Select an audio file:</label>
      <input type="file" accept="audio/*" class="form-control" id="audioInput" />
    </div>

    <button class="btn btn-primary" onclick="transcribe()">Transcribe</button>

    <div id="result" class="mt-3"></div>

    <script>
      function transcribe() {
        var audioInput = document.getElementById("audioInput");
        var file = audioInput.files[0];

        if (!file) {
          alert("Please select an audio file.");
          return;
        }

        var formData = new FormData();
        formData.append("audio", file);

        $.ajax({
          url: "http://localhost:5000/transcribe", // Flask server API endpoint
          type: "POST", // HTTP method
          data: formData,
          processData: false,
          contentType: false,
          success: function (data) {
            $("#result").text("Transcription: " + data.transcription.transcription); // Display transcription
          },
          error: function (error) {
            console.log("Error:", error);
            alert("Error transcribing audio.");
          },
        });
      }
    </script>

    <!-- Include Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>
